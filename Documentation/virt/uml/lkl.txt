
Introduction
============

LKL (Linux Kernel Library) is aiming to allow reusing the Linux kernel code as
extensively as possible with minimal effort and reduced maintenance overhead.

Examples of how LKL can be used are: creating userspace applications (running on
Linux and other operating systems) that can read or write Linux filesystems or
can use the Linux networking stack, creating kernel drivers for other operating
systems that can read Linux filesystems, bootloaders support for reading/writing
Linux filesystems, etc.

With LKL, the kernel code is compiled into an object file that can be directly
linked by applications. The API offered by LKL is based on the Linux system call
interface.

LKL is implemented as one of the mode of UML (arch/um). It uses host operations
defined by the application or a host library (tools/lkl/lib).


Supported hosts
===============

The supported host for now is Linux (x86 architecture) userspace applications.


Building LKL the host library and LKL applications
==================================================

    $ make -C tools/lkl

will build LKL as a object file, it will install it in tools/lkl/lib together
with the headers files in tools/lkl/include then will build the host library,
tests and a few of application examples:

* tests/boot - a simple applications that uses LKL and exercises the basic LKL
  APIs

* tests/net-test - a simple applications that uses network feature of LKL and
  exercises the basic network-related APIs

* fs2tar - a tool that converts a filesystem image to a tar archive

* cptofs/cpfromfs - a tool that copies files to/from a filesystem image

* lklfuse - a tool that can mount a filesystem image in userspace,
  without root privileges, using FUSE


Building LKL on Ubuntu
-----------------------

    $ sudo apt-get install libfuse-dev libarchive-dev xfsprogs

    # Optional, if you would like to be able to run tests
    $ sudo apt-get install btrfs-tools
    $ pip install yamlish junit_xml

    $ make -C tools/lkl

    # To check that everything works:
    $ cd tools/lkl
    $ make run-tests
